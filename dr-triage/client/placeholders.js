const {
    env: { CURL_PLACEHOLDER_BASIC = 'xxx', CURL_PLACEHOLDER_HOST = 'http://localhost:9000' },
  } = process;


const placeholderCurl = `curl --location '${CURL_PLACEHOLDER_HOST}/v1/graph/experimental/query/phoenixShopDatedSearchByGeoQuery' \
--header 'Connection: keep-alive' \
--header 'Sec-Fetch-Dest: empty' \
--header 'Sec-Fetch-Mode: cors' \
--header 'Sec-Fetch-Site: same-origin' \
--header 'accept: */*' \
--header 'accept-language: en-US' \
--header 'apollographql-client-name: phoenix_shop' \
--header 'apollographql-client-version: v1' \
--header 'application-name: shop' \
--header 'content-type: application/json' \
--header 'Authorization: Basic ${CURL_PLACEHOLDER_BASIC}' \
--header 'uxl-datasource-insight: fullResponse,fullRequest' \
--data '{"query":"query phoenixShopDatedSearchByGeoQuery($search: SearchLowestAvailableRatesByGeolocationInput!, $offset: Int, $limit: Int, $sort: SearchLowestAvailableRatesSort, $filter: [PropertyDescriptionType]) {\n  search {\n    lowestAvailableRates {\n      searchByGeolocation(\n        search: $search\n        offset: $offset\n        limit: $limit\n        sort: $sort\n      ) {\n        pageInfo {\n          hasNextPage\n          hasPreviousPage\n          previousOffset\n          currentOffset\n          nextOffset\n        }\n        total\n        edges {\n          node {\n            distance\n            property {\n              id\n              basicInformation {\n                isMax\n                resort\n                isAdultsOnly\n                brand {\n                  id\n                  name\n                  type\n                  photos {\n                    content {\n                      alternateText\n                      index\n                      name\n                      url\n                    }\n                    type {\n                      code\n                    }\n                  }\n                }\n                name\n                nameInDefaultLanguage\n                descriptions(filter: $filter) {\n                  text\n                  type {\n                    code\n                    enumCode\n                  }\n                }\n                currency\n                isRecentlyRenovated\n                isFullyRenovated\n                hasRenovatedRooms\n                ... on HotelBasicInformation {\n                  newLobby\n                }\n                newProperty\n                openingDate\n                latitude\n                longitude\n                bookable\n                hasUniquePropertyLogo\n              }\n              reviews {\n                stars {\n                  count\n                }\n                numberOfReviews {\n                  count\n                }\n              }\n              media {\n                primaryImage {\n                  edges {\n                    node {\n                      alternateDescription\n                      title\n                      imageUrls {\n                        wideHorizontal\n                        square\n                        classicHorizontal\n                      }\n                    }\n                  }\n                }\n              }\n              ... on Hotel {\n                seoNickname\n              }\n            }\n            rates {\n              rateModes {\n                ... on SearchLowestAvailableRatesRateModesCashAndPoints {\n                  cashAndPointsPerUnit {\n                    amount {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                    amountPlusMandatoryFees {\n                      currency\n                      amount\n                      decimalPoint\n                    }\n                    fees {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                    mandatoryFees {\n                      currency\n                      amount\n                      decimalPoint\n                    }\n                    points\n                    taxes {\n                      currency\n                      decimalPoint\n                      amount\n                      decimalPoint\n                    }\n                    totalAmount {\n                      currency\n                      amount\n                      decimalPoint\n                    }\n                  }\n                }\n                ... on SearchLowestAvailableRatesRateModesCash {\n                  lowestAverageRate {\n                    amount {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                    fees {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                    taxes {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                    totalAmount {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                    amountPlusMandatoryFees {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                    mandatoryFees {\n                      amount\n                      currency\n                      decimalPoint\n                    }\n                  }\n                }\n                ... on SearchLowestAvailableRatesRateModesPoints {\n                  pointsPerUnit {\n                    points\n                  }\n                }\n              }\n              membersOnly\n              lengthOfStay\n              status {\n                code\n              }\n              rateCategory {\n                code\n                value\n              }\n              sourceOfRate\n            }\n          }\n        }\n        facets {\n          type {\n            code\n            label\n            count\n            description\n          }\n          buckets {\n            ... on SearchLowestAvailableRatesTermFacetBucket {\n              code\n              label\n              description\n              count\n            }\n            ... on SearchLowestAvailableRatesRangeFacetBucket {\n              index\n              start\n              end\n              count\n            }\n          }\n        }\n        status {\n          ... on ResponseStatus {\n            __typename\n            code\n            httpStatus\n            errors {\n              code\n              devMessage\n              message\n            }\n            warnings {\n              code\n              devMessage\n              message\n            }\n          }\n        }\n        searchQueryId\n      }\n    }\n  }\n}\n","variables":{"search":{"latitude":39.7478001,"longitude":-89.7072687,"distance":80467.2,"options":{"startDate":"2025-06-18","endDate":"2025-06-19","rateRequestTypes":[{"type":"STANDARD","value":""}],"numberInParty":1,"quantity":1,"includeMandatoryFees":true,"customerId":"","includeTaxesAndFees":false,"includeUnavailableProperties":true},"facets":{"terms":[{"type":"BRANDS","dimensions":[]},{"type":"AMENITIES","dimensions":[]},{"type":"PROPERTY_TYPES","dimensions":[]},{"type":"ACTIVITIES","dimensions":[]},{"type":"CITIES","dimensions":[]},{"type":"STATES","dimensions":[]},{"type":"COUNTRIES","dimensions":[]},{"type":"HOTEL_SERVICE_TYPES","dimensions":[]},{"type":"MEETINGS_EVENTS","dimensions":[]},{"type":"TRANSPORTATION_TYPES","dimensions":[]},{"type":"LEISURE_REGIONS","dimensions":[]}],"ranges":[{"type":"PRICE","dimensions":[],"endpoints":["0","100","200","overflow"]},{"type":"DISTANCE","dimensions":[],"endpoints":["0","4830","14520","80470"]}]}},"limit":40,"offset":0,"sort":{"fields":[{"field":"DISTANCE","direction":"ASC"}]},"filter":["HOTEL_MARKETING_CAPTION","RESORT_FEE_DESCRIPTION","DESTINATION_FEE_DESCRIPTION","SURCHARGE_ORDINANCE_COST_DESCRIPTION"]}}'
`;

const placeholderCurl2 = `curl --location '${CURL_PLACEHOLDER_HOST}/v1/graph/experimental/query/phoenixShopDatedSearchByGeoQuery' --header 'Content-Type: application/json' --data-raw '{"query":"query phoenixShopDatedSearchByGeoQuery($search: SearchLowestAvailableRatesByGeolocationInput!, $offset: Int, $limit: Int, $sort: SearchLowestAvailableRatesSort, $filter: [PropertyDescriptionType]) { search { lowestAvailableRates {} } }","variables":{}}'`;

/**
 * @param {string} prompt 
 * @param {Array<{code: string; text: string}>} prompt 
 * @returns { code: string; text: string } | null
 */
export function getPlaceholder(prompt, previous = []) {
    // If prompt is asking for a curl, insert default one above
    if (prompt.toLowerCase().includes('curl') && !previous.some(({code}) => code === 'curl')) {
        return {code: 'curl', text: placeholderCurl2};
    }
    return null;
}